<!-- Address Dialog Modal -->
<div *ngIf="isOpen" class="modal modal-open">
  <div class="modal-box max-w-2xl">
    <!-- Dialog Header -->
    <div class="flex items-start justify-between mb-4">
      <div>
        <h3 class="font-heading font-bold text-2xl text-base-content">
          {{ isWelcomeDialog ? 'Welcome! ðŸŽ‰' : 'Delivery Address' }}
        </h3>
        <p class="text-sm text-base-content/70 mt-1">
          {{ isWelcomeDialog ? 'Please provide your delivery address to continue' : 'Update your delivery address' }}
        </p>
      </div>
      <button
        *ngIf="!isWelcomeDialog"
        (click)="close()"
        class="btn btn-sm btn-circle bg-transparent hover:bg-gray-100"
        aria-label="Close dialog"
      >âœ•</button>
    </div>

    <!-- Error Message -->
    <div *ngIf="errorMessage" class="alert alert-error mb-4">
      <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
      <span>{{ errorMessage }}</span>
    </div>

    <!-- Address Form -->
    <form (ngSubmit)="onSubmit()" class="space-y-4">
      <!-- Delivery Address -->
      <div class="form-control">
        <label class="label">
          <span class="label-text font-semibold">Complete Delivery Address <span class="text-error">*</span></span>
        </label>
        <textarea
          [(ngModel)]="formData.address"
          name="address"
          placeholder="e.g., 123 Main Street, Barangay San Antonio, Manila, Metro Manila, 1000, Philippines"
          class="textarea textarea-bordered w-full h-24 px-3 py-2"
          required
        ></textarea>
        <label class="label">
          <span class="label-text-alt text-base-content/60">Enter your complete delivery address including street, barangay, city, province, and postal code</span>
        </label>
      </div>

      <!-- Phone Number -->
      <div class="form-control">
        <label class="label">
          <span class="label-text font-semibold">Contact Number</span>
        </label>
        <input
          type="tel"
          [(ngModel)]="formData.phoneNumber"
          name="phoneNumber"
          placeholder="e.g., +63 912 345 6789"
          class="input input-bordered w-full px-3 py-2"
        />
        <label class="label">
          <span class="label-text-alt text-base-content/60">Optional - for delivery coordination</span>
        </label>
      </div>

      <!-- Action Buttons -->
      <div class="modal-action">
        <button
          *ngIf="isWelcomeDialog"
          type="button"
          (click)="skip()"
          class="btn bg-transparent hover:bg-gray-100 px-4"
          [disabled]="isSubmitting"
        >
          Skip for now
        </button>
        <button
          *ngIf="!isWelcomeDialog"
          type="button"
          (click)="close()"
          class="btn bg-transparent hover:bg-gray-100 px-4"
          [disabled]="isSubmitting"
        >
          Cancel
        </button>
        <button
          type="submit"
          class="btn bg-olive-green text-white hover:bg-olive-green/90 border-none px-6 py-3"
          [disabled]="isSubmitting"
        >
          <span *ngIf="!isSubmitting">Save Address</span>
          <span *ngIf="isSubmitting" class="loading loading-spinner loading-sm"></span>
          <span *ngIf="isSubmitting">Saving...</span>
        </button>
      </div>
    </form>
  </div>
  <div class="modal-backdrop bg-black/50" (click)="close()"></div>
</div>
