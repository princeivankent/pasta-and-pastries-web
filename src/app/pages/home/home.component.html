<!-- Hero Section -->
<div class="bg-base-100 py-16 lg:py-24">
  <div class="container mx-auto px-4">
    <div class="flex flex-col lg:flex-row items-center gap-12 lg:gap-16 max-w-7xl mx-auto">
      <!-- Lasagna Illustration - LEFT SIDE -->
      <div class="w-full lg:w-1/2 flex justify-center items-center order-2 lg:order-1">
        <div class="w-full max-w-md aspect-square bg-base-200 rounded-3xl shadow-xl flex items-center justify-center border-4 border-neutral/5">
          <img src="/images/lasagna.jpg" alt="Homemade Lasagna" class="w-full h-full object-cover rounded-3xl" />
        </div>
      </div>

      <!-- Text Content - RIGHT SIDE -->
      <div class="w-full lg:w-1/2 text-center lg:text-left order-1 lg:order-2">
        <h1 class="text-4xl md:text-5xl lg:text-6xl font-heading font-bold mb-6 leading-tight text-neutral">
          Homemade Lasagna & Freshly Baked Goodies — Made with Love from Pasta & Pastries by Cha
        </h1>
        <a routerLink="/menu" class="btn bg-olive-green hover:bg-olive-green/90 text-white border-none btn-lg text-lg px-10 py-4 rounded-xl shadow-lg">
          View Menu
        </a>
      </div>
    </div>
  </div>
</div>

<!-- About Section -->
<div class="bg-base-100 py-20">
  <div class="container mx-auto px-4">
    <div class="text-center max-w-3xl mx-auto">
      <h2 class="text-5xl font-heading font-bold mb-8 text-neutral">About</h2>
      <p class="text-xl text-base-content/80 leading-relaxed font-body">
        <b>Pasta & Pastries</b> is a small family-run business dedicated to bringing comfort food to your table.
        Every dish we serve is <b>freshly baked with love, care, and the finest ingredients</b>, capturing the warmth of home in every bite.
        Whether it’s our signature pasta or our delightful pastries, we believe in sharing simple moments of joy through food made from the heart.
      </p>
    </div>
  </div>
</div>

<!-- Best Sellers Section -->
<div class="bg-base-100 py-20">
  <div class="container mx-auto px-4">
    <h2 class="text-5xl font-heading font-bold text-center mb-16 text-neutral">Best Sellers</h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 max-w-7xl mx-auto">
      <app-product-card *ngFor="let product of bestSellers" [product]="product" />
    </div>
  </div>
</div>

<!-- Testimonials Section -->
<div class="bg-light-beige py-20">
  <div class="container mx-auto px-4">
    <h2 class="text-5xl font-heading font-bold text-center mb-12 text-neutral">What Our Customers Say</h2>

    <!-- Carousel Container -->
    <div class="relative max-w-6xl mx-auto"
         (mouseenter)="pauseAutoRotate()"
         (mouseleave)="resumeAutoRotate()">

      <!-- Carousel Track -->
      <div class="overflow-hidden rounded-3xl">
        <div class="flex transition-transform duration-500 ease-out"
             [style.transform]="'translateX(-' + (currentSlide * 100) + '%)'">

          <!-- Testimonial Card -->
          <div *ngFor="let testimonial of testimonials; let i = index"
               class="w-full flex-shrink-0">
            <div class="relative h-[500px] md:h-[600px] rounded-3xl overflow-hidden shadow-2xl mx-2 group transition-transform duration-300 hover:scale-[1.02]"
                 [class.cursor-zoom-in]="testimonial.photo"
                 (click)="testimonial.photo && openImageModal(testimonial.photo, testimonial.name)">

              <!-- Background Image -->
              <div class="absolute inset-0">
                <img [src]="testimonial.photo || ''"
                     [alt]="testimonial.name"
                     class="w-full h-full object-cover" />
              </div>

              <!-- Gradient Overlay -->
              <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent pointer-events-none"></div>

              <!-- Content Overlay -->
              <div class="absolute bottom-0 left-0 right-0 p-8 md:p-12 text-white pointer-events-none">
                <!-- Stars -->
                <div class="flex gap-1 mb-4 justify-center md:justify-start">
                  <svg *ngFor="let star of getStars(testimonial.rating)"
                       xmlns="http://www.w3.org/2000/svg"
                       class="h-6 w-6 md:h-8 md:w-8 fill-current text-yellow-400"
                       viewBox="0 0 20 20">
                    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                  </svg>
                </div>

                <!-- Testimonial Text -->
                <p class="text-xl md:text-2xl lg:text-3xl font-heading font-semibold mb-4 leading-relaxed text-center md:text-left">
                  "{{ testimonial.text }}"
                </p>

                <!-- Customer Name -->
                <p class="text-lg md:text-xl font-body font-medium text-center md:text-left">
                  — {{ testimonial.name }}
                </p>
              </div>
            </div>
          </div>

        </div>
      </div>

      <!-- Navigation Arrows -->
      <button (click)="prevSlide()"
              class="absolute left-4 top-1/2 -translate-y-1/2 btn btn-circle bg-white/90 hover:bg-white border-none shadow-lg z-10 hidden md:flex">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
        </svg>
      </button>

      <button (click)="nextSlide()"
              class="absolute right-4 top-1/2 -translate-y-1/2 btn btn-circle bg-white/90 hover:bg-white border-none shadow-lg z-10 hidden md:flex">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg>
      </button>

      <!-- Dot Indicators -->
      <div class="flex justify-center gap-3 mt-8">
        <button *ngFor="let testimonial of testimonials; let i = index"
                (click)="goToSlide(i)"
                [class]="'h-3 rounded-full transition-all duration-300 ' +
                         (i === currentSlide ? 'bg-olive-green w-8' : 'bg-gray-400 w-3 hover:bg-gray-500')"
                [attr.aria-label]="'Go to testimonial ' + (i + 1)">
        </button>
      </div>
    </div>

    <!-- Image Modal (DaisyUI) -->
    <dialog id="testimonial_image_modal" class="modal">
      <div class="modal-box max-w-4xl w-11/12 p-0">
        <form method="dialog">
          <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2 z-10 bg-white/80 hover:bg-white">✕</button>
        </form>
        <figure class="w-full">
          <img [src]="selectedImageUrl"
               [alt]="selectedImageName"
               class="w-full h-auto object-contain max-h-[80vh]" />
        </figure>
        <div class="p-4 bg-base-100">
          <h3 class="font-bold text-lg text-center">{{ selectedImageName }}</h3>
        </div>
      </div>
      <form method="dialog" class="modal-backdrop">
        <button>close</button>
      </form>
    </dialog>
  </div>
</div>

<!-- Order CTA Section -->
<div class="bg-base-100 py-20">
  <div class="container mx-auto px-4 text-center">
    <h2 class="text-3xl md:text-4xl font-body font-normal mb-8 max-w-4xl mx-auto leading-tight text-neutral">
      Ready to order? Pickup or Delivery available — click below to start your order!
    </h2>
    <a routerLink="/contact" class="btn bg-olive-green hover:bg-olive-green/90 text-white border-none btn-lg text-lg px-10 py-4 rounded-xl shadow-lg">
      Order Now
    </a>
  </div>
</div>
